var d=Object.create;var{getPrototypeOf:o,defineProperty:I,getOwnPropertyNames:g}=Object;var m=Object.prototype.hasOwnProperty;var l=(f,B,J)=>{J=f!=null?d(o(f)):{};let K=B||!f||!f.__esModule?I(J,"default",{value:f,enumerable:!0}):J;for(let _ of g(f))if(!m.call(K,_))I(K,_,{get:()=>f[_],enumerable:!0});return K};var s=(f,B)=>()=>(B||f((B={exports:{}}).exports,B),B.exports);var b=s((C,R)=>{(function(f,B){if(typeof define==="function"&&define.amd)define("webextension-polyfill",["module"],B);else if(typeof C!=="undefined")B(R);else{var J={exports:{}};B(J),f.browser=J.exports}})(typeof globalThis!=="undefined"?globalThis:typeof self!=="undefined"?self:C,function(f){if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(!(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)){let J=(K)=>{let _={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(_).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class z extends WeakMap{constructor(S,i=void 0){super(i);this.createItem=S}get(S){if(!this.has(S))this.set(S,this.createItem(S));return super.get(S)}}let k=(S)=>{return S&&typeof S==="object"&&typeof S.then==="function"},y=(S,i)=>{return(...L)=>{if(K.runtime.lastError)S.reject(new Error(K.runtime.lastError.message));else if(i.singleCallbackArg||L.length<=1&&i.singleCallbackArg!==!1)S.resolve(L[0]);else S.resolve(L)}},N=(S)=>S==1?"argument":"arguments",M=(S,i)=>{return function L(V,...H){if(H.length<i.minArgs)throw new Error(`Expected at least ${i.minArgs} ${N(i.minArgs)} for ${S}(), got ${H.length}`);if(H.length>i.maxArgs)throw new Error(`Expected at most ${i.maxArgs} ${N(i.maxArgs)} for ${S}(), got ${H.length}`);return new Promise((Q,X)=>{if(i.fallbackToNoCallback)try{V[S](...H,y({resolve:Q,reject:X},i))}catch(E){console.warn(`${S} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,E),V[S](...H),i.fallbackToNoCallback=!1,i.noCallback=!0,Q()}else if(i.noCallback)V[S](...H),Q();else V[S](...H,y({resolve:Q,reject:X},i))})}},W=(S,i,L)=>{return new Proxy(i,{apply(V,H,Q){return L.call(H,S,...Q)}})},D=Function.call.bind(Object.prototype.hasOwnProperty),q=(S,i={},L={})=>{let V=Object.create(null),H={has(X,E){return E in S||E in V},get(X,E,Y){if(E in V)return V[E];if(!(E in S))return;let G=S[E];if(typeof G==="function")if(typeof i[E]==="function")G=W(S,S[E],i[E]);else if(D(L,E)){let $=M(E,L[E]);G=W(S,S[E],$)}else G=G.bind(S);else if(typeof G==="object"&&G!==null&&(D(i,E)||D(L,E)))G=q(G,i[E],L[E]);else if(D(L,"*"))G=q(G,i[E],L["*"]);else return Object.defineProperty(V,E,{configurable:!0,enumerable:!0,get(){return S[E]},set($){S[E]=$}}),G;return V[E]=G,G},set(X,E,Y,G){if(E in V)V[E]=Y;else S[E]=Y;return!0},defineProperty(X,E,Y){return Reflect.defineProperty(V,E,Y)},deleteProperty(X,E){return Reflect.deleteProperty(V,E)}},Q=Object.create(S);return new Proxy(Q,H)},T=(S)=>({addListener(i,L,...V){i.addListener(S.get(L),...V)},hasListener(i,L){return i.hasListener(S.get(L))},removeListener(i,L){i.removeListener(S.get(L))}}),v=new z((S)=>{if(typeof S!=="function")return S;return function i(L){let V=q(L,{},{getContent:{minArgs:0,maxArgs:0}});S(V)}}),x=new z((S)=>{if(typeof S!=="function")return S;return function i(L,V,H){let Q=!1,X,E=new Promise((F)=>{X=function(Z){Q=!0,F(Z)}}),Y;try{Y=S(L,V,X)}catch(F){Y=Promise.reject(F)}let G=Y!==!0&&k(Y);if(Y!==!0&&!G&&!Q)return!1;let $=(F)=>{F.then((Z)=>{H(Z)},(Z)=>{let h;if(Z&&(Z instanceof Error||typeof Z.message==="string"))h=Z.message;else h="An unexpected error occurred";H({__mozWebExtensionPolyfillReject__:!0,message:h})}).catch((Z)=>{console.error("Failed to send onMessage rejected reply",Z)})};if(G)$(Y);else $(E);return!0}}),n=({reject:S,resolve:i},L)=>{if(K.runtime.lastError)if(K.runtime.lastError.message==="The message port closed before a response was received.")i();else S(new Error(K.runtime.lastError.message));else if(L&&L.__mozWebExtensionPolyfillReject__)S(new Error(L.message));else i(L)},O=(S,i,L,...V)=>{if(V.length<i.minArgs)throw new Error(`Expected at least ${i.minArgs} ${N(i.minArgs)} for ${S}(), got ${V.length}`);if(V.length>i.maxArgs)throw new Error(`Expected at most ${i.maxArgs} ${N(i.maxArgs)} for ${S}(), got ${V.length}`);return new Promise((H,Q)=>{let X=n.bind(null,{resolve:H,reject:Q});V.push(X),L.sendMessage(...V)})},u={devtools:{network:{onRequestFinished:T(v)}},runtime:{onMessage:T(x),onMessageExternal:T(x),sendMessage:O.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:O.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},c={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return _.privacy={network:{"*":c},services:{"*":c},websites:{"*":c}},q(K,u,_)};f.exports=J(chrome)}else f.exports=globalThis.browser})});var U=l(b(),1),j=(f)=>{return typeof f.name==="string"&&typeof f.description==="string"&&typeof f.enabled==="boolean"&&Array.isArray(f.hostnames)&&f.hostnames.every((B)=>typeof B==="string")&&typeof f.code==="string"};class P{async getScripts(){let f=await U.default.storage.local.get().then((B)=>B.scripts);if(!f||!Array.isArray(f))return await U.default.storage.local.set({scripts:[]}),this.getScripts();return f.filter(j)}async addScript(f){if(!j(f))throw new Error("Invalid script format");let B=await this.getScripts();if(B.some((J)=>J.name===f.name))throw new Error("Script with this name already exists");B.push(f),await U.default.storage.local.set({scripts:B})}async removeScript(f){let J=(await this.getScripts()).filter((K)=>K.name!==f);await U.default.storage.local.set({scripts:J})}async updateScript(f,B){let J=await this.getScripts(),K=J.findIndex((_)=>_.name===f);if(K===-1)throw new Error("Script not found");J[K]=B,await U.default.storage.local.set({scripts:J})}}var w=new P;var A=async()=>{let hostname=window.location.hostname;(await w.getScripts()).filter((f)=>f.hostnames.includes(hostname)&&f.enabled).forEach((script)=>eval(script.code))};if(document.readyState==="loading"||document.readyState==="interactive")document.addEventListener("DOMContentLoaded",A);else A();
